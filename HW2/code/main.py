# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'v2_hw.ui'
#
# Created by: PyQt5 UI code generator 5.15.1
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from utils.backgroundsubtraction import BackgroundSubtraction
from utils.opticalflow import OpticalFlow
from utils.perspectivetransform import PerspectiveTransform
from utils.pca import PCA
from utils.DogsandCat import Show_Image
from utils.model import ResNet, block
import matplotlib.pyplot as plt
import cv2

class Ui_MainWindow(object):
    def __init__(self):
        self.BackgroundSubtraction = BackgroundSubtraction()
        self.OpticalFlow = OpticalFlow()
        self.PerspectiveTransform = PerspectiveTransform()
        self.PCA = PCA()
        self.data_dir = 'data/dataset/PetImages/'
        self.model_dir = 'trained_model/ResNet_hw2.pt'
        self.show_random_img = Show_Image(data_dir= self.data_dir, model_dir= self.model_dir)

    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(1168, 861)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(90, 80, 261, 91))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(90, 290, 261, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(90, 560, 261, 91))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(670, 110, 261, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setObjectName("label_4")
        self.pushButton = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton.setGeometry(QtCore.QRect(90, 160, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton.setFont(font)
        self.pushButton.setObjectName("pushButton")
        self.pushButton_2 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_2.setGeometry(QtCore.QRect(90, 360, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_2.setFont(font)
        self.pushButton_2.setObjectName("pushButton_2")
        self.pushButton_3 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_3.setGeometry(QtCore.QRect(90, 440, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_3.setFont(font)
        self.pushButton_3.setObjectName("pushButton_3")
        self.pushButton_4 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_4.setGeometry(QtCore.QRect(90, 640, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_4.setFont(font)
        self.pushButton_4.setObjectName("pushButton_4")
        self.pushButton_5 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_5.setGeometry(QtCore.QRect(670, 170, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_5.setFont(font)
        self.pushButton_5.setObjectName("pushButton_5")
        self.label_5 = QtWidgets.QLabel(self.centralwidget)
        self.label_5.setGeometry(QtCore.QRect(670, 350, 271, 41))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_5.setFont(font)
        self.label_5.setObjectName("label_5")
        self.pushButton_6 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_6.setGeometry(QtCore.QRect(670, 430, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_6.setFont(font)
        self.pushButton_6.setObjectName("pushButton_6")
        self.pushButton_7 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_7.setGeometry(QtCore.QRect(670, 520, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_7.setFont(font)
        self.pushButton_7.setObjectName("pushButton_7")
        self.pushButton_8 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_8.setGeometry(QtCore.QRect(670, 610, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_8.setFont(font)
        self.pushButton_8.setObjectName("pushButton_8")
        self.pushButton_9 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_9.setGeometry(QtCore.QRect(670, 240, 251, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_9.setFont(font)
        self.pushButton_9.setObjectName("pushButton_9")
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 1168, 24))
        self.menubar.setObjectName("menubar")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

        self.pushButton.clicked.connect(self.BackgroundSubtraction.subtract)
        self.pushButton_2.clicked.connect(self.OpticalFlow.draw)
        self.pushButton_3.clicked.connect(self.OpticalFlow.flow)
        self.pushButton_4.clicked.connect(self.PerspectiveTransform.transform)
        self.pushButton_5.clicked.connect(self.PCA.reconstruction)
        self.pushButton_9.clicked.connect(self.PCA.get_error)
        self.pushButton_7.clicked.connect(self.show_random_img.show_img)
        self.pushButton_6.clicked.connect(self.show_board)
        self.pushButton_8.clicked.connect(self.show_comparison)

    def show_board(self):
        img = cv2.imread('data/training_accu.png')
        cv2.imshow('img', img)
        plt.show()

    def show_comparison(self):
        img = cv2.imread('data/vision_comparision.png')
        cv2.imshow('img', img)
        plt.show()

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.label.setText(_translate("MainWindow", "1. BackGroundSubtraction"))
        self.label_2.setText(_translate("MainWindow", "2. Optical Flow"))
        self.label_3.setText(_translate("MainWindow", "3. Perspective Transform "))
        self.label_4.setText(_translate("MainWindow", "4. PCA"))
        self.pushButton.setText(_translate("MainWindow", "1.1. Background Subtraction"))
        self.pushButton_2.setText(_translate("MainWindow", "2.1 Preprocessing "))
        self.pushButton_3.setText(_translate("MainWindow", "2.1 Video Tracking"))
        self.pushButton_4.setText(_translate("MainWindow", "3.1 Perspective Transform "))
        self.pushButton_5.setText(_translate("MainWindow", "4.1 Image Reconstruction"))
        self.label_5.setText(_translate("MainWindow", "5. Dog and Cats Calssification "))
        self.pushButton_6.setText(_translate("MainWindow", "5.1 Tensorboard Display"))
        self.pushButton_7.setText(_translate("MainWindow", "5.2 Show Image "))
        self.pushButton_8.setText(_translate("MainWindow", "5.3 Show Comparision"))
        self.pushButton_9.setText(_translate("MainWindow", "4.2 Reconstruction Error"))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
